<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AI-Trends-Intelligence-Platform: backend.routes Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AI-Trends-Intelligence-Platform<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">A platform for analyzing AI industry trends and sector rotation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('namespacebackend_1_1routes.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">backend.routes Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af94cb35ed143505be19aee71d9c6c0c0" id="r_af94cb35ed143505be19aee71d9c6c0c0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af94cb35ed143505be19aee71d9c6c0c0">get_articles</a> (Session <a class="el" href="namespacebackend_1_1db.html">db</a>=Depends(get_db), Optional[str] search=Query(None), int page=Query(1, ge=1), int page_size=Query(20, ge=1, le=100))</td></tr>
<tr class="memitem:a340a4fbf6f0713c9244ad72cc6d0f5ae" id="r_a340a4fbf6f0713c9244ad72cc6d0f5ae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a340a4fbf6f0713c9244ad72cc6d0f5ae">get_article</a> (int article_id, Session <a class="el" href="namespacebackend_1_1db.html">db</a>=Depends(get_db))</td></tr>
<tr class="memitem:a62ae6ec45814eef33abd80373d2f5ed0" id="r_a62ae6ec45814eef33abd80373d2f5ed0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a62ae6ec45814eef33abd80373d2f5ed0">create_chat_session</a> (<a class="el" href="classbackend_1_1db_1_1schemas_1_1_session_create_request.html">SessionCreateRequest</a> request)</td></tr>
<tr class="memitem:a4261e3fec99496af4527e3d4055a28d1" id="r_a4261e3fec99496af4527e3d4055a28d1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4261e3fec99496af4527e3d4055a28d1">send_message</a> (<a class="el" href="classbackend_1_1db_1_1schemas_1_1_chat_request.html">ChatRequest</a> request)</td></tr>
<tr class="memitem:ac0e42228acd1d32777dc9ef5f2d8b9fb" id="r_ac0e42228acd1d32777dc9ef5f2d8b9fb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac0e42228acd1d32777dc9ef5f2d8b9fb">close_chat_session</a> (str session_id)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a38d7257c156a13de623e1011741ff24f" id="r_a38d7257c156a13de623e1011741ff24f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a38d7257c156a13de623e1011741ff24f">router</a> = APIRouter()</td></tr>
<tr class="memitem:a23764eea2b0634e6197de92b7936f476" id="r_a23764eea2b0634e6197de92b7936f476"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a23764eea2b0634e6197de92b7936f476">level</a></td></tr>
<tr class="memitem:ad3f8946a355d3cbdc39a70317b3b7aea" id="r_ad3f8946a355d3cbdc39a70317b3b7aea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad3f8946a355d3cbdc39a70317b3b7aea">logger</a> = logging.getLogger(__name__)</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">API route definitions for the backend.

This module defines HTTP endpoints used by the frontend and internal jobs.
Routes return Pydantic response models when appropriate and perform
dependency injection for database sessions.

Endpoints
---------
get_articles
    Return a paginated list of articles.
get_article
    Return a single article by id.
chat_with_analyst
    Legacy chat endpoint.
create_chat_session
    Create a chat session for an article with context.
send_message
    Send a message in a chat session and return assistant response.
close_chat_session
    Close and cleanup a chat session.
</pre> </div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ac0e42228acd1d32777dc9ef5f2d8b9fb" name="ac0e42228acd1d32777dc9ef5f2d8b9fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0e42228acd1d32777dc9ef5f2d8b9fb">&#9670;&#160;</a></span>close_chat_session()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">backend.routes.close_chat_session </td>
          <td>(</td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>session_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Close an active chat session and remove cached data.

:param session_id: The unique identifier of the chat session to close.
:type session_id: str
:returns: Confirmation message indicating successful session closure.
:rtype: dict
:raises: HTTPException with 404 if session not found, or Exception on cleanup errors.
</pre> 
<p class="definition">Definition at line <a class="el" href="routes_8py_source.html#l00189">189</a> of file <a class="el" href="routes_8py_source.html">routes.py</a>.</p>

</div>
</div>
<a id="a62ae6ec45814eef33abd80373d2f5ed0" name="a62ae6ec45814eef33abd80373d2f5ed0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62ae6ec45814eef33abd80373d2f5ed0">&#9670;&#160;</a></span>create_chat_session()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">backend.routes.create_chat_session </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbackend_1_1db_1_1schemas_1_1_session_create_request.html">SessionCreateRequest</a></td>          <td class="paramname"><span class="paramname"><em>request</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Create a new chat session for an article with context.

Initializes a server-side session storing article metadata (title, content,
sources, tags, impact score) and creates an initial greeting message. Returns
the session ID and initial message history for the frontend to display.

:param request: Session creation request containing article metadata.
:type request: SessionCreateRequest
:returns: Session response with the newly created session ID and initial messages.
:rtype: SessionResponse
:raises: Exception on session creation or processing errors.
</pre> 
<p class="definition">Definition at line <a class="el" href="routes_8py_source.html#l00098">98</a> of file <a class="el" href="routes_8py_source.html">routes.py</a>.</p>

</div>
</div>
<a id="a340a4fbf6f0713c9244ad72cc6d0f5ae" name="a340a4fbf6f0713c9244ad72cc6d0f5ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a340a4fbf6f0713c9244ad72cc6d0f5ae">&#9670;&#160;</a></span>get_article()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">backend.routes.get_article </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>article_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Session </td>          <td class="paramname"><span class="paramname"><em>db</em></span><span class="paramdefsep"> = </span><span class="paramdefval">Depends(get_db)</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Retrieve a single article by id with all associated sources and tags.

:param article_id: The ID of the article to retrieve.
:param db: Injected database session.
:returns: Full article details including sources and tags.
:raises: Exception on database or processing errors.
</pre> 
<p class="definition">Definition at line <a class="el" href="routes_8py_source.html#l00083">83</a> of file <a class="el" href="routes_8py_source.html">routes.py</a>.</p>

</div>
</div>
<a id="af94cb35ed143505be19aee71d9c6c0c0" name="af94cb35ed143505be19aee71d9c6c0c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af94cb35ed143505be19aee71d9c6c0c0">&#9670;&#160;</a></span>get_articles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">backend.routes.get_articles </td>
          <td>(</td>
          <td class="paramtype">Session </td>          <td class="paramname"><span class="paramname"><em>db</em></span><span class="paramdefsep"> = </span><span class="paramdefval">Depends(get_db)</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[str] </td>          <td class="paramname"><span class="paramname"><em>search</em></span><span class="paramdefsep"> = </span><span class="paramdefval">Query(None)</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int </td>          <td class="paramname"><span class="paramname"><em>page</em></span><span class="paramdefsep"> = </span><span class="paramdefval">Query(1,&#160;ge=1)</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int </td>          <td class="paramname"><span class="paramname"><em>page_size</em></span><span class="paramdefsep"> = </span><span class="paramdefval">Query(20,&#160;ge=1,&#160;le=100)</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Retrieve a paginated list of articles, optionally filtered by search.

:param db: Injected database session.
:param search: Optional search string to filter articles by title.
:param page: Page number (1-indexed, default 1).
:param page_size: Number of articles per page (default 20, max 100).
:returns: Paginated articles response with metadata.
:raises: Exception on database or processing errors.
</pre> 
<p class="definition">Definition at line <a class="el" href="routes_8py_source.html#l00045">45</a> of file <a class="el" href="routes_8py_source.html">routes.py</a>.</p>

</div>
</div>
<a id="a4261e3fec99496af4527e3d4055a28d1" name="a4261e3fec99496af4527e3d4055a28d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4261e3fec99496af4527e3d4055a28d1">&#9670;&#160;</a></span>send_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">backend.routes.send_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbackend_1_1db_1_1schemas_1_1_chat_request.html">ChatRequest</a></td>          <td class="paramname"><span class="paramname"><em>request</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Send a message in an active chat session and receive an AI response.

:param request: Chat request containing session ID and user message.
:type request: ChatRequest
:returns: Chat response with the assistant's reply and updated message history.
:rtype: ChatResponse
:raises: HTTPException with 404 if session not found, or Exception on processing errors.
</pre> 
<p class="definition">Definition at line <a class="el" href="routes_8py_source.html#l00135">135</a> of file <a class="el" href="routes_8py_source.html">routes.py</a>.</p>

</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="a23764eea2b0634e6197de92b7936f476" name="a23764eea2b0634e6197de92b7936f476"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23764eea2b0634e6197de92b7936f476">&#9670;&#160;</a></span>level</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">backend.routes.level</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="routes_8py_source.html#l00041">41</a> of file <a class="el" href="routes_8py_source.html">routes.py</a>.</p>

</div>
</div>
<a id="ad3f8946a355d3cbdc39a70317b3b7aea" name="ad3f8946a355d3cbdc39a70317b3b7aea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3f8946a355d3cbdc39a70317b3b7aea">&#9670;&#160;</a></span>logger</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">backend.routes.logger = logging.getLogger(__name__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="routes_8py_source.html#l00042">42</a> of file <a class="el" href="routes_8py_source.html">routes.py</a>.</p>

</div>
</div>
<a id="a38d7257c156a13de623e1011741ff24f" name="a38d7257c156a13de623e1011741ff24f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38d7257c156a13de623e1011741ff24f">&#9670;&#160;</a></span>router</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">backend.routes.router = APIRouter()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="routes_8py_source.html#l00040">40</a> of file <a class="el" href="routes_8py_source.html">routes.py</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="namespacebackend.html">backend</a></li><li class="navelem"><a href="namespacebackend_1_1routes.html">routes</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
